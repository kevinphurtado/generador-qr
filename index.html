<!DOCTYPE html>
<html lang="es" class="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generador de Códigos QR Personalizados</title>
  
  <meta name="description" content="Crea códigos QR personalizados gratis y al instante. Añade tu logo, elige colores y genera QR para sitios web, Wi-Fi, vCard, SMS, Instagram, WhatsApp y más. Fácil y sin registros.">
  <meta name="keywords" content="generador qr, código qr, qr gratis, qr con logo, qr personalizado, choco creativo, qr para wifi, qr para instagram, qr vcard, qr sms">

  <meta property="og:title" content="Generador de Códigos QR Personalizados">
  <meta property="og:description" content="Crea códigos QR únicos con tu logo. Ideal para menús, tarjetas de presentación y eventos. Rápido, gratuito y de código abierto.">
  <meta property="og:image" content="img/icon.png">
  <meta property="og:url" content="https://chococreativo.com.co/">
  <meta property="og:type" content="website">

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: { 50: '#f0f9ff', 100: '#e0f2fe', 200: '#bae6fd', 300: '#7dd3fc', 400: '#38bdf8', 500: '#0ea5e9', 600: '#0284c7', 700: '#0369a1', 800: '#075985', 900: '#0c4a6e' }
          },
          animation: { 'fade-in': 'fadeIn 0.5s ease-out', 'slide-up': 'slideUp 0.3s ease-out', 'pulse-soft': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite' },
          keyframes: {
            fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
            slideUp: { '0%': { transform: 'translateY(10px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } }
          }
        }
      }
    }
  </script>
  <script src="https://unpkg.com/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    :root { --color-primary: #4f46e5; }
    body { font-family: 'Inter', sans-serif; transition: background-color 0.3s, color 0.3s; }
    
    /* Estilo de tarjetas ORIGINAL RESTAURADO */
    .qr-type-card {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      padding: 1.5rem 1rem; background-color: white; border-radius: 1rem;
      border: 1px solid #e5e7eb; text-align: center; gap: 0.75rem;
      transition: all 0.3s; cursor: pointer; height: 10rem;
    }
    .dark .qr-type-card { background-color: #1f2937; border-color: #374151; }
    .qr-type-card:hover { border-color: var(--color-primary); transform: translateY(-5px) scale(1.02); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.07); }
    .qr-type-icon { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; border-radius: 12px; margin-bottom: 0.5rem; }

    .color-option { width: 24px; height: 24px; border-radius: 50%; cursor: pointer; transition: transform 0.2s; }
    .color-option:hover { transform: scale(1.1); }
    .color-option.active { transform: scale(1.15); box-shadow: 0 0 0 3px white, 0 0 0 5px var(--color-primary); }
    .dark .color-option.active { box-shadow: 0 0 0 3px #1a202c, 0 0 0 5px var(--color-primary); }
    
    .template-option { border: 2px solid transparent; transition: all 0.2s; }
    .template-option:hover { border-color: #6366f1; }
    .template-option.selected { border-color: var(--color-primary); box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2); }

    .download-hd-button {
      background: linear-gradient(to right, #6b21a8, #4f46e5); color: white;
      font-weight: 600; padding: 12px 24px; border-radius: 12px;
      transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .download-hd-button:hover { opacity: 0.9; box-shadow: 0 6px 15px rgba(0,0,0,0.3); }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-100">

  <header class="bg-white dark:bg-gray-800 p-4 flex justify-between items-center sticky top-0 z-40 shadow-sm">
    <div class="flex items-center gap-2">
      <div class="w-10 h-10 rounded-lg bg-primary-600 flex items-center justify-center"><i class="fas fa-qrcode text-white text-xl"></i></div>
      <h1 class="text-xl md:text-2xl font-bold bg-gradient-to-r from-primary-600 to-purple-600 bg-clip-text text-transparent" data-translate="header_title">Generador QR</h1>
    </div>
    <div class="flex items-center gap-3">
      <button id="lang-toggle" class="px-3 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 font-medium text-sm">EN</button>
      <button id="toggle-dark" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700"><i class="fas fa-moon text-gray-700 dark:text-yellow-400"></i></button>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8 max-w-7xl">
    
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">Generador de <span class="text-primary-600">Códigos QR</span></h2>
      <p class="text-lg md:text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">Crea códigos QR personalizados con tu logo y colores. Gratis y sin registro.</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 mb-16">
      
      <div class="lg:col-span-3">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">
          <h3 class="text-2xl font-bold mb-6 flex items-center gap-2"><i class="fas fa-qrcode text-primary-600"></i><span data-translate="generator_title">Tipos de QR</span></h3>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-4" id="qr-type-selector">
            <div data-modal-id="modal-web" class="qr-type-card"><div class="qr-type-icon bg-blue-100 text-blue-600"><i class="fas fa-globe text-xl"></i></div><span class="font-semibold" data-translate="card_web_title">Sitio web</span><p class="text-xs text-gray-500 dark:text-gray-400" data-translate="card_web_subtitle">Enlace a cualquier URL</p></div>
            <div data-modal-id="modal-instagram" class="qr-type-card"><div class="qr-type-icon bg-pink-100 text-pink-600"><i class="fab fa-instagram text-xl"></i></div><span class="font-semibold" data-translate="card_insta_title">Instagram</span><p class="text-xs text-gray-500 dark:text-gray-400" data-translate="card_insta_subtitle">Comparte tu perfil</p></div>
            <div data-modal-id="modal-whatsapp" class="qr-type-card"><div class="qr-type-icon bg-green-100 text-green-600"><i class="fab fa-whatsapp text-xl"></i></div><span class="font-semibold" data-translate="card_wa_title">WhatsApp</span><p class="text-xs text-gray-500 dark:text-gray-400" data-translate="card_wa_subtitle">Recibe mensajes</p></div>
            <div data-modal-id="modal-wifi" class="qr-type-card"><div class="qr-type-icon bg-sky-100 text-sky-600"><i class="fas fa-wifi text-xl"></i></div><span class="font-semibold" data-translate="card_wifi_title">Wi-Fi</span><p class="text-xs text-gray-500 dark:text-gray-400" data-translate="card_wifi_subtitle">Conéctate a una red</p></div>
            <div data-modal-id="modal-email" class="qr-type-card"><div class="qr-type-icon bg-amber-100 text-amber-600"><i class="fas fa-envelope text-xl"></i></div><span class="font-semibold" data-translate="card_email_title">Email</span><p class="text-xs text-gray-500 dark:text-gray-400" data-translate="card_email_subtitle">Envía un correo</p></div>
            <div data-modal-id="modal-call" class="qr-type-card"><div class="qr-type-icon bg-red-100 text-red-600"><i class="fas fa-phone text-xl"></i></div><span class="font-semibold" data-translate="card_call_title">Teléfono</span><p class="text-xs text-gray-500 dark:text-gray-400" data-translate="card_call_subtitle">Llama con un toque</p></div>
            <div data-modal-id="modal-sms" class="qr-type-card"><div class="qr-type-icon bg-cyan-100 text-cyan-600"><i class="fas fa-comment-sms text-xl"></i></div><span class="font-semibold" data-translate="card_sms_title">SMS</span><p class="text-xs text-gray-500 dark:text-gray-400" data-translate="card_sms_subtitle">Envía mensajes de texto</p></div>
            <div data-modal-id="modal-vcard" class="qr-type-card"><div class="qr-type-icon bg-indigo-100 text-indigo-600"><i class="fas fa-address-card text-xl"></i></div><span class="font-semibold" data-translate="card_vcard_title">Contacto</span><p class="text-xs text-gray-500 dark:text-gray-400" data-translate="card_vcard_subtitle">Comparte tu vCard</p></div>
            <div data-modal-id="modal-location" class="qr-type-card"><div class="qr-type-icon bg-rose-100 text-rose-600"><i class="fas fa-map-marker-alt text-xl"></i></div><span class="font-semibold" data-translate="card_location_title">Ubicación</span><p class="text-xs text-gray-500 dark:text-gray-400" data-translate="card_location_subtitle">Comparte una ubicación</p></div>
          </div>
        </div>

        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mt-6">
          <div class="flex justify-between items-center cursor-pointer" id="customization-toggle">
            <h3 class="text-xl font-bold flex items-center gap-2"><i class="fas fa-paint-brush text-primary-600"></i><span data-translate="customization_title">Personalización</span></h3>
            <i class="fas fa-chevron-down text-gray-400 transition-transform" id="customization-arrow"></i>
          </div>
          <div class="overflow-hidden transition-all duration-300 ease-in-out max-h-0" id="customization-panel">
            <div class="pt-4 space-y-4">
              <div>
                <label class="block text-sm font-medium mb-2" data-translate="customization_color_label">Color del QR</label>
                <div class="flex gap-2"><div class="color-option bg-black active" data-color="#000000"></div><div class="color-option bg-primary-600" data-color="#4f46e5"></div><div class="color-option bg-red-600" data-color="#dc2626"></div><div class="color-option bg-green-600" data-color="#16a34a"></div><div class="color-option bg-blue-600" data-color="#2563eb"></div><div class="color-option bg-purple-600" data-color="#9333ea"></div></div>
              </div>
              <div>
                <label class="block text-sm font-medium mb-2" data-translate="customization_dots_label">Forma de los puntos</label>
                <div class="flex gap-4"><div class="flex items-center gap-2"><input type="radio" id="dots-rounded" name="dots-style" value="rounded" checked class="rounded-full"><label for="dots-rounded" class="text-sm" data-translate="dots_rounded">Redondeados</label></div><div class="flex items-center gap-2"><input type="radio" id="dots-square" name="dots-style" value="square" class="rounded-full"><label for="dots-square" class="text-sm" data-translate="dots_square">Cuadrados</label></div><div class="flex items-center gap-2"><input type="radio" id="dots-dot" name="dots-style" value="dot" class="rounded-full"><label for="dots-dot" class="text-sm" data-translate="dots_dot">Puntos</label></div></div>
              </div>
              <div>
                <label class="block text-sm font-medium mb-2" data-translate="templates_title">Plantillas</label>
                <div class="grid grid-cols-2 gap-3">
                  <div class="template-option selected p-2 rounded-lg border border-gray-200 dark:border-gray-700 cursor-pointer" data-template="default"><div class="bg-gray-200 dark:bg-gray-700 h-16 rounded flex items-center justify-center"><div class="w-10 h-10 border-2 border-gray-400 rounded"></div></div><p class="text-xs text-center mt-1">Default</p></div>
                  <div class="template-option p-2 rounded-lg border border-gray-200 dark:border-gray-700 cursor-pointer" data-template="frame"><div class="bg-gray-200 dark:bg-gray-700 h-16 rounded flex items-center justify-center relative"><div class="w-10 h-10 border-2 border-gray-400 rounded"></div><div class="absolute bottom-1 left-0 right-0 h-3 bg-gray-300 dark:bg-gray-600 mx-2 rounded-sm"></div></div><p class="text-xs text-center mt-1" data-translate="template_frame">Con marco</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="lg:col-span-2">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sticky lg:top-24 text-center">
            <h3 class="text-2xl font-bold mb-4" data-translate="preview_title">Vista Previa</h3>
            <div class="bg-gray-200 dark:bg-gray-700 rounded-xl w-full aspect-square flex items-center justify-center mx-auto p-4">
                <div id="final-qr-preview" class="w-full h-full bg-white rounded-lg flex items-center justify-center">
                    <div id="qr-placeholder" class="text-center text-gray-500 p-4">
                        <i class="fas fa-qrcode text-5xl mb-4 text-gray-300"></i>
                        <p class="font-semibold text-sm" data-translate="qr_placeholder_title">Selecciona un tipo de QR para comenzar</p>
                    </div>
                </div>
            </div>
            <div class="w-full mt-6">
                <button id="download-png" class="download-hd-button w-full flex items-center justify-center gap-2">
                    <i class="fas fa-download"></i><span data-translate="download_button">Descargar HD</span>
                </button>
            </div>
        </div>
      </div>
    </div>
    
    <section class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 mb-16">
      <h2 class="text-3xl font-bold text-center mb-2" data-translate="benefits_title">Beneficios del Generador QR</h2>
      <p class="text-gray-600 dark:text-gray-300 text-center mb-8 max-w-3xl mx-auto" data-translate="benefits_subtitle">Crea códigos QR estáticos y personalizados de forma rápida y gratuita. Ideal para tarjetas de presentación, menús, eventos y más.</p>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl text-center"><div class="w-14 h-14 bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-infinity text-xl"></i></div><h3 class="font-semibold mb-2" data-translate="benefit_1">Códigos QR ilimitados</h3><p class="text-sm text-gray-600 dark:text-gray-400">Genera tantos códigos QR como necesites sin límites</p></div>
        <div class="bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl text-center"><div class="w-14 h-14 bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-image text-xl"></i></div><h3 class="font-semibold mb-2" data-translate="benefit_2">Personalización de logos</h3><p class="text-sm text-gray-600 dark:text-gray-400">Añade tu logo para personalizar y brandear tus QR</p></div>
        <div class="bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl text-center"><div class="w-14 h-14 bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-user-secret text-xl"></i></div><h3 class="font-semibold mb-2" data-translate="benefit_3">No requiere registro</h3><p class="text-sm text-gray-600 dark:text-gray-400">Usa nuestro generador sin necesidad de crear una cuenta</p></div>
        <div class="bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl text-center"><div class="w-14 h-14 bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-lock-open text-xl"></i></div><h3 class="font-semibold mb-2" data-translate="benefit_4">Totalmente gratuito</h3><p class="text-sm text-gray-600 dark:text-gray-400">Código abierto y completamente gratuito para siempre</p></div>
      </div>
    </section>
  </main>
  
  <footer class="bg-white dark:bg-gray-800 p-6 text-gray-600 dark:text-gray-300">
    <div class="container mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
      <p class="text-sm">&copy; 2025 <span data-translate="footer_developed_by">Desarrollado por</span> <a href="https://chococreativo.com.co/proyectos" target="_blank" rel="noopener noreferrer" class="text-primary-600 hover:text-primary-700 font-medium">Chocó Creativo</a> 🖤</p>
      <div class="flex items-center flex-wrap justify-center gap-x-6 gap-y-2">
        <a href="#" id="privacy-link" class="text-sm hover:text-primary-600 transition-colors" data-translate="footer_privacy">Política de Privacidad</a>
        <a href="#" id="terms-link" class="text-sm hover:text-primary-600 transition-colors" data-translate="footer_terms">Términos y Condiciones</a>
        <a href="https://www.paypal.com/ncp/payment/P5L5PMJN2J43Q" target="_blank" rel="noopener noreferrer" class="px-4 py-2 bg-green-500 text-white rounded-lg shadow-md hover:bg-green-600 transition-all duration-300 text-sm flex items-center gap-2">
          <i class="fas fa-heart"></i>
          <span data-translate="footer_donate">Donar</span>
        </a>
      </div>
    </div>
  </footer>

  <div id="modal-container"></div>
  
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let currentQRContent = ''; let selectedLogo = null; let currentLanguage = 'es';
      let qrCodeInstance = null; let currentColor = '#000000';
      let currentDotStyle = 'rounded'; let currentTemplate = 'default';

      const qrPlaceholder = document.getElementById('qr-placeholder');
      const finalQrPreview = document.getElementById('final-qr-preview');

      const translations = {
        es: {
          header_title: "Generador QR", generator_title: "Tipos de QR", customization_title: "Personalización",
          preview_title: "Vista Previa", qr_placeholder_title: "Selecciona un tipo de QR para comenzar",
          customization_color_label: "Color del código QR", customization_dots_label: "Forma de los puntos",
          dots_rounded: "Redondeados", dots_square: "Cuadrados", dots_dot: "Puntos",
          templates_title: "Plantillas", template_frame: "Con marco",
          card_web_title: "Sitio Web", card_web_subtitle: "Enlaza a cualquier URL", card_insta_title: "Instagram", card_insta_subtitle: "Comparte tu perfil",
          card_wa_title: "WhatsApp", card_wa_subtitle: "Recibe mensajes directos", card_wifi_title: "Wi-Fi", card_wifi_subtitle: "Conecta automáticamente",
          card_call_title: "Teléfono", card_call_subtitle: "Llama con un toque", card_email_title: "Email", card_email_subtitle: "Envía correos fácilmente",
          card_sms_title: "SMS", card_sms_subtitle: "Envía mensajes de texto", card_vcard_title: "Contacto", card_vcard_subtitle: "Comparte tu vCard",
          card_location_title: "Ubicación", card_location_subtitle: "Comparte una ubicación",
          download_button: "Descargar HD",
          benefits_title: "Beneficios del Generador QR", benefits_subtitle: "Crea códigos QR estáticos y personalizados de forma rápida y gratuita. Ideal para tarjetas de presentación, menús, eventos y más.",
          benefit_1: "Códigos QR ilimitados", benefit_2: "Personalización de logos", benefit_3: "No requiere registro", benefit_4: "Totalmente gratuito",
          footer_developed_by: "Desarrollado por", footer_privacy: "Política de Privacidad", footer_terms: "Términos y Condiciones", footer_donate: "Donar",
          modal_config_web: "Configurar QR de Sitio Web", modal_url_label: "URL del sitio web", modal_config_insta: "Configurar QR de Instagram", modal_user_label: "Nombre de usuario (sin @)",
          modal_config_wa: "Configurar QR de WhatsApp", modal_msg_label: "Mensaje (opcional)", modal_config_wifi: "Configurar QR de Wi-Fi", modal_ssid_label: "Nombre de la Red (SSID)", modal_pass_label: "Contraseña", modal_encrypt_label: "Tipo de Cifrado",
          modal_config_call: "Configurar QR de Llamada", modal_phone_num_label: "Número de Teléfono", modal_config_email: "Configurar QR de Email", modal_email_addr_label: "Dirección de correo", modal_subject_label: "Asunto", modal_body_label: "Cuerpo del mensaje",
          modal_config_sms: "Configurar QR para SMS", modal_sms_body_label: "Mensaje", modal_config_vcard: "Configurar QR de Contacto (vCard)", modal_vcard_name_label: "Nombre Completo", modal_vcard_org_label: "Organización", modal_vcard_email_label: "Email", modal_vcard_web_label: "Sitio Web",
          modal_config_location: "Configurar QR de Ubicación", modal_loc_lat_label: "Latitud", modal_loc_lon_label: "Longitud",
          modal_close_button: "Cerrar", modal_generate_button: "Generar QR", frame_logo_title: "Logo (Opcional)",
          privacy_title: "Política de Privacidad", privacy_text: "Esta aplicación es de código abierto y no almacena ningún dato ingresado por el usuario. Toda la generación de códigos QR se realiza en el lado del cliente (en su navegador).",
          terms_title: "Términos y Condiciones", terms_text: "El uso de este servicio es gratuito. Usted es responsable del contenido que genera. No se permite el uso para fines ilícitos.",
        },
        en: {
          header_title: "QR Generator", generator_title: "QR Types", customization_title: "Customization",
          preview_title: "Preview", qr_placeholder_title: "Select a QR type to begin",
          customization_color_label: "QR code color", customization_dots_label: "Dot shape",
          dots_rounded: "Rounded", dots_square: "Square", dots_dot: "Dots",
          templates_title: "Templates", template_frame: "With frame",
          card_web_title: "Website", card_web_subtitle: "Link to any URL", card_insta_title: "Instagram", card_insta_subtitle: "Share your profile",
          card_wa_title: "WhatsApp", card_wa_subtitle: "Receive direct messages", card_wifi_title: "Wi-Fi", card_wifi_subtitle: "Connect automatically",
          card_call_title: "Phone", card_call_subtitle: "Call with one tap", card_email_title: "Email", card_email_subtitle: "Send emails easily",
          card_sms_title: "SMS", card_sms_subtitle: "Send a text message", card_vcard_title: "Contact", card_vcard_subtitle: "Share your vCard",
          card_location_title: "Location", card_location_subtitle: "Share a map location",
          download_button: "Download HD",
          benefits_title: "Benefits of the QR Generator", benefits_subtitle: "Create static and personalized QR codes quickly and for free. Ideal for business cards, menus, events, and more.",
          benefit_1: "Unlimited QR codes", benefit_2: "Logo customization", benefit_3: "No registration required", benefit_4: "Completely free",
          footer_developed_by: "Developed by", footer_privacy: "Privacy Policy", footer_terms: "Terms and Conditions", footer_donate: "Donate",
          modal_config_web: "Configure Website QR", modal_url_label: "Website URL", modal_config_insta: "Configure Instagram QR", modal_user_label: "Username (without @)",
          modal_config_wa: "Configure WhatsApp QR", modal_msg_label: "Message (optional)", modal_config_wifi: "Configure Wi-Fi QR", modal_ssid_label: "Network Name (SSID)", modal_pass_label: "Password", modal_encrypt_label: "Encryption Type",
          modal_config_call: "Configure Call QR", modal_phone_num_label: "Phone Number", modal_config_email: "Configure Email QR", modal_email_addr_label: "Email address", modal_subject_label: "Subject", modal_body_label: "Message body",
          modal_config_sms: "Configure SMS QR", modal_sms_body_label: "Message", modal_config_vcard: "Configure Contact QR (vCard)", modal_vcard_name_label: "Full Name", modal_vcard_org_label: "Organization", modal_vcard_email_label: "Email", modal_vcard_web_label: "Website",
          modal_config_location: "Configure Location QR", modal_loc_lat_label: "Latitude", modal_loc_lon_label: "Longitude",
          modal_close_button: "Close", modal_generate_button: "Generate QR", frame_logo_title: "Logo (Optional)",
          privacy_title: "Privacy Policy", privacy_text: "This application is open source and does not store any data entered by the user. All QR code generation is done on the client side (in your browser).",
          terms_title: "Terms and Conditions", terms_text: "Use of this service is free. You are responsible for the content you generate. Use for illegal purposes is not permitted..",
        }
      };

      const setLanguage = (lang) => {
        currentLanguage = lang; document.documentElement.lang = lang;
        document.querySelectorAll('[data-translate]').forEach(el => {
          const key = el.getAttribute('data-translate');
          if (translations[lang] && translations[lang][key]) { el.textContent = translations[lang][key]; }
        });
        document.getElementById('lang-toggle').textContent = lang === 'es' ? 'EN' : 'ES';
      };

      const renderFinalQR = () => {
        if (!currentQRContent) return;
        qrPlaceholder.style.display = 'none'; finalQrPreview.innerHTML = '';
        const qrOptions = {
          width: finalQrPreview.clientWidth, height: finalQrPreview.clientHeight, data: currentQRContent, image: selectedLogo,
          dotsOptions: { color: currentColor, type: currentDotStyle },
          backgroundOptions: { color: '#ffffff' },
          imageOptions: { hideBackgroundDots: true, imageSize: 0.35, margin: 5 },
          cornersSquareOptions: { type: "extra-rounded" }, cornersDotOptions: { type: "dot" }
        };
        if (currentTemplate === 'frame') {
          qrOptions.dotsOptions.color = '#4f46e5';
          qrOptions.backgroundOptions.color = '#f3f4f6';
        }
        qrCodeInstance = new QRCodeStyling(qrOptions);
        qrCodeInstance.append(finalQrPreview);
      };
      
      const downloadQR = () => {
        if (!currentQRContent) { alert('Primero genere un código QR.'); return; }
        const downloadInstance = new QRCodeStyling({
          width: 1000, height: 1000, data: currentQRContent, image: selectedLogo,
          dotsOptions: { color: currentColor, type: currentDotStyle },
          backgroundOptions: { color: "transparent" },
          imageOptions: { hideBackgroundDots: true, imageSize: 0.35, margin: 20 },
          cornersSquareOptions: { type: "extra-rounded" }, cornersDotOptions: { type: "dot" }
        });
        downloadInstance.download({ name: "qr-choco-creativo", extension: "png" });
      };

      const setupEventListeners = () => {
        document.getElementById('customization-toggle').addEventListener('click', () => {
          const panel = document.getElementById('customization-panel');
          const arrow = document.getElementById('customization-arrow');
          panel.classList.toggle('max-h-0'); panel.classList.toggle('pt-4');
          arrow.classList.toggle('rotate-180');
        });
        document.querySelectorAll('.color-option').forEach(option => option.addEventListener('click', (e) => {
          document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
          e.target.classList.add('active'); currentColor = e.target.dataset.color;
          if (currentQRContent) renderFinalQR();
        }));
        document.querySelectorAll('input[name="dots-style"]').forEach(radio => radio.addEventListener('change', (e) => {
          currentDotStyle = e.target.value; if (currentQRContent) renderFinalQR();
        }));
        document.querySelectorAll('.template-option').forEach(template => template.addEventListener('click', (e) => {
          document.querySelectorAll('.template-option').forEach(t => t.classList.remove('selected'));
          const current = e.target.closest('.template-option');
          current.classList.add('selected'); currentTemplate = current.dataset.template;
          if (currentQRContent) renderFinalQR();
        }));
        document.getElementById('download-png').addEventListener('click', downloadQR);
        document.getElementById('toggle-dark').addEventListener('click', () => {
          document.documentElement.classList.toggle('dark');
        });
        document.getElementById('lang-toggle').addEventListener('click', () => setLanguage(currentLanguage === 'es' ? 'en' : 'es'));
        document.getElementById('qr-type-selector').addEventListener('click', (e) => {
          const card = e.target.closest('.qr-type-card');
          if (card && card.dataset.modalId) {
            selectedLogo = null; openModal(card.dataset.modalId);
          }
        });
        document.getElementById('privacy-link').addEventListener('click', (e) => { e.preventDefault(); openModal('modal-privacy'); });
        document.getElementById('terms-link').addEventListener('click', (e) => { e.preventDefault(); openModal('modal-terms'); });
      };

      const injectModals = () => {
        const commonModalSections = (type) => `
          <div class="mt-4 border-t pt-4 dark:border-gray-600">
            <label class="block text-sm font-medium mb-2" data-translate="frame_logo_title"></label>
            <input type="file" class="logo-input text-sm w-full file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:text-gray-300" accept="image/*" data-modal-type="${type}">
            <img class="logo-preview hidden w-16 h-16 mt-2 rounded-md object-contain bg-gray-100 dark:bg-gray-700" id="logo-preview-${type}">
          </div>
          <div class="mt-6 flex justify-end gap-2">
            <button class="modal-close bg-gray-200 dark:bg-gray-600 px-4 py-2 rounded-lg" data-translate="modal_close_button"></button>
            <button data-qr-type="${type}" class="generate-qr-button bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg" data-translate="modal_generate_button"></button>
          </div>`;
        document.getElementById('modal-container').innerHTML = `
        <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center transition-opacity duration-300 z-50 p-4 hidden">
          <div class="modal-content-wrapper w-full max-w-md">
            <div id="modal-web" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hidden"><h3 class="text-lg font-bold mb-4" data-translate="modal_config_web"></h3><label class="block mb-2 text-sm" data-translate="modal_url_label"></label><input id="web-url" type="url" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="https://ejemplo.com">${commonModalSections('web')}</div>
            <div id="modal-instagram" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hidden"><h3 class="text-lg font-bold mb-4" data-translate="modal_config_insta"></h3><label class="block mb-2 text-sm" data-translate="modal_user_label"></label><input id="instagram-user" type="text" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="usuario.de.instagram">${commonModalSections('instagram')}</div>
            <div id="modal-whatsapp" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hidden"><h3 class="text-lg font-bold mb-4" data-translate="modal_config_wa"></h3><label class="block mb-2 text-sm" data-translate="modal_phone_num_label"></label><input id="whatsapp-phone" type="tel" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="573001234567"><label class="block mt-4 mb-2 text-sm" data-translate="modal_msg_label"></label><textarea id="whatsapp-message" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" rows="2" placeholder="¡Hola!"></textarea>${commonModalSections('whatsapp')}</div>
            <div id="modal-wifi" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hidden"><h3 class="text-lg font-bold mb-4" data-translate="modal_config_wifi"></h3><label class="block mb-2 text-sm" data-translate="modal_ssid_label"></label><input id="wifi-ssid" type="text" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="NombreDeMiRed"><label class="block mt-4 mb-2 text-sm" data-translate="modal_pass_label"></label><input id="wifi-password" type="password" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600"><label class="block mt-4 mb-2 text-sm" data-translate="modal_encrypt_label"></label><select id="wifi-encryption" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600"><option value="WPA">WPA/WPA2</option><option value="WEP">WEP</option><option value="nopass">Sin contraseña</option></select>${commonModalSections('wifi')}</div>
            <div id="modal-call" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hidden"><h3 class="text-lg font-bold mb-4" data-translate="modal_config_call"></h3><label class="block mb-2 text-sm" data-translate="modal_phone_num_label"></label><input id="call-phone" type="tel" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="+573001234567">${commonModalSections('call')}</div>
            <div id="modal-email" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hidden"><h3 class="text-lg font-bold mb-4" data-translate="modal_config_email"></h3><label class="block mb-2 text-sm" data-translate="modal_email_addr_label"></label><input id="email-addr" type="email" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="correo@ejemplo.com"><label class="block mt-4 mb-2 text-sm" data-translate="modal_subject_label"></label><input id="email-subject" type="text" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="Asunto"><label class="block mt-4 mb-2 text-sm" data-translate="modal_body_label"></label><textarea id="email-body" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" rows="2"></textarea>${commonModalSections('email')}</div>
            <div id="modal-sms" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hidden"><h3 class="text-lg font-bold mb-4" data-translate="modal_config_sms"></h3><label class="block mb-2 text-sm" data-translate="modal_phone_num_label"></label><input id="sms-phone" type="tel" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="+573001234567"><label class="block mt-4 mb-2 text-sm" data-translate="modal_sms_body_label"></label><textarea id="sms-body" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" rows="3" placeholder="Mensaje..."></textarea>${commonModalSections('sms')}</div>
            <div id="modal-vcard" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hidden"><h3 class="text-lg font-bold mb-4" data-translate="modal_config_vcard"></h3><div class="space-y-3 text-left"><label class="block text-sm" data-translate="modal_vcard_name_label"></label><input id="vcard-name" type="text" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="Juan Pérez"><label class="block text-sm" data-translate="modal_phone_num_label"></label><input id="vcard-phone" type="tel" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="+573001234567"><label class="block text-sm" data-translate="modal_vcard_email_label"></label><input id="vcard-email" type="email" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="juan.perez@email.com"><label class="block text-sm" data-translate="modal_vcard_org_label"></label><input id="vcard-org" type="text" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="Empresa"><label class="block text-sm" data-translate="modal_vcard_web_label"></label><input id="vcard-web" type="url" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="https://tu-sitio.com"></div>${commonModalSections('vcard')}</div>
            <div id="modal-location" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hidden"><h3 class="text-lg font-bold mb-4" data-translate="modal_config_location"></h3><label class="block mb-2 text-sm" data-translate="modal_loc_lat_label"></label><input id="loc-lat" type="text" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="Ej: 4.60971"><label class="block mt-4 mb-2 text-sm" data-translate="modal_loc_lon_label"></label><input id="loc-lon" type="text" class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" placeholder="Ej: -74.08175">${commonModalSections('location')}</div>
            <div id="modal-privacy" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl w-full max-w-lg hidden"><h3 class="text-lg font-bold mb-2" data-translate="privacy_title"></h3><p class="text-sm" data-translate="privacy_text"></p><button class="modal-close mt-4 bg-indigo-600 text-white px-3 py-1 rounded-lg" data-translate="modal_close_button"></button></div>
            <div id="modal-terms" class="modal-content bg-white dark:bg-gray-800 p-6 rounded-2xl w-full max-w-lg hidden"><h3 class="text-lg font-bold mb-2" data-translate="terms_title"></h3><p class="text-sm" data-translate="terms_text"></p><button class="modal-close mt-4 bg-indigo-600 text-white px-3 py-1 rounded-lg" data-translate="modal_close_button"></button></div>
          </div>
        </div>`;
      };
      
      const setupModalLogic = () => {
        const modalOverlay = document.getElementById('modal-overlay');
        const openModal = (modalId) => {
          modalOverlay.querySelectorAll('.modal-content').forEach(m => m.classList.add('hidden'));
          const modal = document.getElementById(modalId);
          if (modal) modal.classList.remove('hidden');
          modalOverlay.classList.remove('hidden');
        };
        const closeModal = () => modalOverlay.classList.add('hidden');
        window.openModal = openModal;
        modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay || e.target.closest('.modal-close')) { closeModal(); } });
        document.addEventListener('change', (event) => {
          if (event.target.matches('.logo-input')) {
            const type = event.target.dataset.modalType; const preview = document.getElementById(`logo-preview-${type}`);
            if (event.target.files && event.target.files[0]) {
              const reader = new FileReader();
              reader.onload = (e) => { selectedLogo = e.target.result; if(preview) { preview.src = selectedLogo; preview.classList.remove('hidden'); } };
              reader.readAsDataURL(event.target.files[0]);
            }
          }
        });
        document.addEventListener('click', (e) => {
          if (e.target.closest('.generate-qr-button')) {
            const type = e.target.closest('.generate-qr-button').dataset.qrType;
            let content = '';
            switch(type) {
              case 'web': content = document.getElementById('web-url').value; break;
              case 'instagram': content = `https://www.instagram.com/${document.getElementById('instagram-user').value.replace('@', '')}`; break;
              case 'whatsapp': content = `https://wa.me/${document.getElementById('whatsapp-phone').value.replace(/\s/g, '')}?text=${encodeURIComponent(document.getElementById('whatsapp-message').value)}`; break;
              case 'wifi': content = `WIFI:T:${document.getElementById('wifi-encryption').value};S:${document.getElementById('wifi-ssid').value};P:${document.getElementById('wifi-password').value};;`; break;
              case 'call': content = `tel:${document.getElementById('call-phone').value.replace(/\s/g, '')}`; break;
              case 'email': content = `mailto:${document.getElementById('email-addr').value}?subject=${encodeURIComponent(document.getElementById('email-subject').value)}&body=${encodeURIComponent(document.getElementById('email-body').value)}`; break;
              case 'sms': content = `smsto:${document.getElementById('sms-phone').value.replace(/\s/g, '')}:${document.getElementById('sms-body').value}`; break;
              case 'vcard':
                const vname = document.getElementById('vcard-name').value; const vphone = document.getElementById('vcard-phone').value; const vemail = document.getElementById('vcard-email').value; const vorg = document.getElementById('vcard-org').value; const vweb = document.getElementById('vcard-web').value;
                content = `BEGIN:VCARD\nVERSION:3.0\nFN:${vname}\nORG:${vorg}\nTEL;TYPE=CELL:${vphone}\nEMAIL:${vemail}\nURL:${vweb}\nEND:VCARD`; break;
              case 'location': content = `geo:${document.getElementById('loc-lat').value},${document.getElementById('loc-lon').value}`; break;
            }
            if (content && content.length > 5) { currentQRContent = content; renderFinalQR(); closeModal(); } 
            else { alert('Por favor, completa los campos requeridos.'); }
          }
        });
      };
      
      const checkSystemDarkMode = () => { if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) { document.documentElement.classList.add('dark'); }};
      
      injectModals(); setupModalLogic(); setLanguage('es');
      setupEventListeners(); checkSystemDarkMode();
    });
  </script>
</body>
</html>